module.exports=function(t){function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){function s(t,i){var e={minDiameter:2,size:"auto",imageCenterType:"contain"};i||(i={}),this.options={};for(var s in e)null!==i[s]&&void 0!==i[s]?this.options[s]=i[s]:this.options[s]=e[s];this.el="object"==typeof t?t:document.querySelector(t),"auto"===this.options.size&&(this.options.size=Math.min(this.el.clientWidth,this.el.clientHeight)),this.canvasSize=this.options.size*o,this.diameter=this.canvasSize/2,this.sourceCanvas=null,this.targetCanvas=null,this.sourceImage=null,this.circles=[],this.requestAnimationSeed=0,this.moveEvent="ontouchstart"in window?"touchmove":"mousemove",this.moveHandler=this.onMove.bind(this),this.rect=this.el.getBoundingClientRect(),this.init()}var n=e(1),o=2;s.prototype={constructor:s,init:function(){this.createSourceCanvas(),this.createTargetCanvas(),this.bindEvent(),this.render()},createSourceCanvas:function(){this.sourceCanvas=document.createElement("canvas"),this.sourceCanvas.width=this.canvasSize,this.sourceCanvas.height=this.canvasSize},createTargetCanvas:function(){this.targetCanvas=document.createElement("canvas"),this.targetCanvas.width=this.canvasSize,this.targetCanvas.height=this.canvasSize,this.targetCanvas.style.width=this.targetCanvas.style.height=this.options.size+"px",this.el.appendChild(this.targetCanvas)},drawSourceImage:function(){var t=this.canvasSize,i=new n({containerWidth:t,containerHeight:t,originWidth:this.sourceImage.naturalWidth,originHeight:this.sourceImage.naturalHeight,centerType:this.options.imageCenterType}),e=this.sourceCanvas.getContext("2d");e.clearRect(0,0,t,t),e.drawImage(this.sourceImage,i.offset().left,i.offset().top,i.width(),i.height())},drawCircle:function(){var t,i,e,s=this.targetCanvas.getContext("2d");3===arguments.length?(t=arguments[0],i=arguments[1],e=arguments[2],this.circles.push({x:t,y:i,r:e,readyToSplit:!1})):(t=arguments[0].x,i=arguments[0].y,e=arguments[0].r),s.fillStyle=this.getPixelRGBColor(t,i),s.beginPath(),s.arc(t,i,e,0,2*Math.PI),s.closePath(),s.fill()},bindEvent:function(){this.targetCanvas.addEventListener(this.moveEvent,this.moveHandler)},unbindEvent:function(){this.targetCanvas.removeEventListener(this.moveEvent,this.moveHandler)},onMove:function(t){var i="ontouchstart"in window,e=this.rect;i?this.tagCircle((t.touches[0].clientX-e.left)*o,(t.touches[0].clientY-e.top)*o):this.tagCircle(t.offsetX*o,t.offsetY*o),t.preventDefault(),t.stopPropagation()},tagCircle:function(t,i){for(var e=this.circles,s=null,n=0;n<e.length;n++)if(s=e[n],!s.readyToSplit&&t>s.x-s.r&&t<s.x+s.r&&i>s.y-s.r&&i<s.y+s.r){s.readyToSplit=!0;break}},setImage:function(t){var i=this.canvasSize;this.circles=[],this.targetCanvas.getContext("2d").clearRect(0,0,i,i),"string"==typeof t?(this.sourceImage=new Image,this.sourceImage.crossOrigin="Anonymous",this.sourceImage.onload=function(){this.drawSourceImage(),this.drawCircle(this.targetCanvas.width/2,this.targetCanvas.height/2,this.diameter)}.bind(this),this.sourceImage.src=t):(this.sourceImage=t,this.drawSourceImage(),this.drawCircle(this.targetCanvas.width/2,this.targetCanvas.height/2,this.diameter))},render:function(){var t=this.options.minDiameter*o;this.circles.forEach(function(i){i.readyToSplit&&i.r>t?this.splitCircle(i):i.readyToSplit=!1},this),this.requestAnimationSeed=requestAnimationFrame(this.render.bind(this))},splitCircle:function(t){var i=this.targetCanvas.getContext("2d"),e=t.r/2;i.clearRect(t.x-t.r,t.y-t.r,2*t.r,2*t.r),this.drawCircle(t.x+e,t.y-e,e),this.drawCircle(t.x-e,t.y+e,e),this.drawCircle(t.x+e,t.y+e,e),t.x-=e,t.y-=e,t.r=e,t.readyToSplit=!1,this.drawCircle(t)},split:function(){this.circles.forEach(function(t){t.readyToSplit=!0})},getPixelRGBColor:function(t,i){var e=this.sourceCanvas.getContext("2d").getImageData(parseInt(t),parseInt(i),1,1).data;return"rgb("+e[0]+","+e[1]+","+e[2]+")"},destroy:function(){cancelAnimationFrame(this.requestAnimationSeed),this.unbindEvent(),this.sourceCanvas=null,this.targetCanvas=null,this.sourceImage=null,this.circles=[]}},t.exports=s},function(t,i,e){!function(i,e){t.exports=e()}(this,function(){"use strict";function t(t){t=t||{},this.options={containerWidth:100,containerHeight:100,originWidth:100,originHeight:100,centerType:"cover"};for(var i in this.options)void 0!==t[i]&&(this.options[i]=t[i]);this._ratio=1,this._newWidth=0,this._newHeight=0,this._offset={top:0,left:0},"cover"===this.options.centerType?this._coverCenter():this._containCenter()}return t.prototype={constructor:t,_coverCenter:function(){var t=this.options.originWidth,i=this.options.originHeight,e=this.options.containerWidth,s=this.options.containerHeight,n=t/i,o=e/s,r=1;n>o?(r=s/i,this._newWidth=t*r,this._newHeight=i*r,this._offset={top:0,left:(this._newWidth-e)/-2}):n<o?(r=e/t,this._newWidth=t*r,this._newHeight=i*r,this._offset={top:(this._newHeight-s)/-2,left:0}):(r=e/t,this._newWidth=t*r,this._newHeight=i*r,this._offset={top:0,left:0}),this._ratio=r},_containCenter:function(){var t=this.options.originWidth,i=this.options.originHeight,e=this.options.containerWidth,s=this.options.containerHeight,n=t/i,o=e/s,r=1;n>o?(r=e/t,this._newWidth=t*r,this._newHeight=i*r,this._offset={top:(this._newHeight-s)/-2,left:0}):n<o?(r=s/i,this._newWidth=t*r,this._newHeight=i*r,this._offset={top:0,left:(this._newWidth-e)/-2}):(r=e/t,this._newWidth=t*r,this._newHeight=i*r,this._offset={top:0,left:0}),this._ratio=r},ratio:function(){return this._ratio},width:function(){return this._newWidth},height:function(){return this._newHeight},offset:function(){return this._offset}},t})}]);